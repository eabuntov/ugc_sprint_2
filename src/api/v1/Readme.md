# API фильмов с Elasticsearch

Этот API предоставляет доступ к данным о фильмах, жанрах и людях. Он поддерживает поиск, фильтрацию и пагинацию с использованием данных из Elasticsearch.

## Конечные точки

### 1. Главная страница (`/`)

* **Метод:** `GET`
* **Краткое описание:** Отображает главную страницу с подборкой фильмов из Elasticsearch.
* **Описание:** Получает список фильмов, позволяя сортировать, фильтровать по рейтингу и выбирать тип.
* **Параметры:**
* `sort` (необязательно): Поле для сортировки (например, `rating`, `title`).
* `sort_order` (необязательно, по умолчанию: `desc`): Порядок сортировки (`asc` или `desc`).
* `min_rating` (необязательно): Минимальный рейтинг для отображения фильмов.
* `max_rating` (необязательно): Максимальный рейтинг для отображения фильмов.
* `type` (необязательно): Тип фильма (`movie` или `tv_show`).
* `page_number` (необязательно, по умолчанию 1): Номер страницы для пагинации
* `page_size` (необязательно, по умолчанию 50): Количество результатов на странице для пагинации.
* **Ответ:** HTML-контент главной страницы.

### 2. Фильм (`/health`)

* **Метод:** `GET`
* **Краткое описание:** Проверка работоспособности
* **Описание:** Простая проверка работоспособности для проверки доступности приложения. Возвращает 200 OK, если служба работает корректно. * **Ответ:** `200 OK`

### 3. Фильм (поиск) (`/search`)

* **Метод:** `GET`
* **Краткое описание:** Поиск фильмов
* **Описание:** Выполняет полнотекстовый поиск фильмов по названию, описанию, жанру или режиссёру. Возвращает результаты с пагинацией.
* **Параметры:**
* `query` (обязательно): Строка поискового запроса (например, «звёздные войны»).
* `page_number` (необязательно, по умолчанию 1): Номер страницы для пагинации.
* `page_size` (необязательно, по умолчанию 50): Количество результатов на странице для пагинации.
* **Ответ:** JSON-массив соответствующих объектов фильмов.

### 4. Отдельный фильм (`/film/{film_id}`)

* **Метод:** `GET`
* **Краткое описание:** Извлечение отдельного фильма
* **Описание:** Извлечение отдельного фильма по его идентификатору.
* **Ответ:** JSON-представление фильма.

### 5. Список жанров (`/genres`)

* **Метод:** `GET`
* **Краткое описание:** Список всех жанров
* **Описание:** Возвращает JSON-массив всех зарегистрированных жанров.
* **Ответ:** JSON-массив объектов жанров.

### 6. Список людей (`/people`)

* **Метод:** `GET`
* **Краткое описание:** Список всех людей (актёров, режиссёров и т. д.)
* **Описание:** Возвращает JSON-массив всех зарегистрированных людей.
* **Ответ:** JSON-массив объектов «Персона».

## Модели данных (JSON)

* **Фильм:** `{"id": "string", "title": "string", "description": "string", "creation_date": "date", "rating": "number", "type": "movie|tv_show"}`
* **Жанр:** `{"id": "string", "name": "string", "description": "string"}`
* **Персона:** `{"id": "string", "full_name": "string"}`

## Обработка ошибок

API использует стандартные коды состояния HTTP. Ошибки валидации возвращают `HTTPValidationError` с подробной информацией о недопустимых полях.

```json
{
"detail": [
{
"loc": ["body", "rating"],
"msg": "рейтинг должен быть от 0 до 10",
"type": "rating_range"
}
]
}